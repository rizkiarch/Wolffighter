import{Q as q}from"./QSpace.6224fdf1.js";import{j as G,k as K,i as X,l as Y,u as _,e as Z,w as l,o as h,a as e,au as u,b as t,av as ee,f as le,g as w,a_ as I,t as p,aa as b,d as m,b3 as L,V as B,Q as c,c as Q,ai as R,ag as A,h as x}from"./main.2fcd03e8.js";import{_ as ae,b as O,Q as D,d as te,a as g}from"./default.da633e22.js";import{Q as N}from"./QSelect.40e7703e.js";import{Q as oe}from"./QImg.e42a0a33.js";import{Q as $}from"./QTd.9f5adca7.js";import{Q as ne}from"./QForm.ce614037.js";import{Q as se,a as ie}from"./QTable.645c833d.js";import{Q as de}from"./QPage.d8ddcd99.js";import{C as z}from"./ClosePopup.303998cd.js";import"./QLayout.a7112026.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.4b414a6d.js";const re=["top","middle","bottom"];var T=G({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:n=>re.includes(n)}},setup(n,{slots:k}){const r=K(()=>n.align!==void 0?{verticalAlign:n.align}:null),C=K(()=>{const y=n.outline===!0&&n.color||n.textColor;return`q-badge flex inline items-center no-wrap q-badge--${n.multiLine===!0?"multi":"single"}-line`+(n.outline===!0?" q-badge--outline":n.color!==void 0?` bg-${n.color}`:"")+(y!==void 0?` text-${y}`:"")+(n.floating===!0?" q-badge--floating":"")+(n.rounded===!0?" q-badge--rounded":"")+(n.transparent===!0?" q-badge--transparent":"")});return()=>X("div",{class:C.value,style:r.value,role:"alert","aria-label":n.label},n.label!==void 0?n.label:Y(k.default))}});const ue=t("div",{class:"text-h6 col-auto q-mb-md"}," Kordinator Lapangan ",-1),ce={class:"row q-col-gutter-md q-mb-lg"},me={class:"col-md-3 col-12"},fe=m(" No results "),_e={class:"col-md-4 col-12"},ge={class:"q-gutter-sm"},pe={class:"q-pa-md q-gutter-sm"},be={class:"text-h6"},ve={class:"row q-col-gutter-xs"},he=m(" Korlap "),we=m(" SILATURAHMI AKBAR "),xe=m(" Aliansi Relawan JOKOWI "),ke=m(" Se-Banyumas Raya, 17 Juli 2022 "),ye={class:"q-gutter-sm"},Qe={class:"q-pa-md q-gutter-sm"},Ce=t("div",{class:"text-h6"}," Data Relawan ",-1),Ve={class:"row q-col-gutter-md"},Se={class:"col-md-4 col-6"},qe={class:"col-md-4 col-6"},Ie={class:"col-md-2 col-12"},Be={class:"row q-mt-md"},Ae={class:"col-auto q-mb-md q-mr-sm"},Ne=t("div",{class:"text-h6"}," Peserta ",-1),$e=t("thead",null,[t("tr",null,[t("th",{class:"text-left"}," NIK "),t("th",{class:"text-left"}," NAMA ")])],-1),ze={class:"text-left"},Ue={class:"text-left"},Fe={layout:ae},Ge=Object.assign(Fe,{props:["korlaps","users ","organisasis"],setup(n){const k=n,r=_(!1);_(!1);const C=({row:o})=>{x.Inertia.delete(`/data/korlap/${o.id}`)},y=o=>{x.Inertia.visit(o)},P=(o,i,a)=>{console.log(i.id),x.Inertia.visit(`/pengadaan/order-pembelian/${i.id}`)},M=[{name:"no",field:"no",label:"Kode",align:"left"},{name:"organisasi",field:"organisasi",label:"Nama Organisasi",align:"left",sortable:!0,format:o=>o.nama_organisasi},{name:"user",field:"user",label:"Nama Korlap",align:"left",sortable:!0,format:o=>o.name},{name:"user",field:"user",label:"No HP",align:"left",sortable:!0,format:o=>o.phone},{name:"user",field:"user",label:"Alamat",align:"left",sortable:!0,format:o=>o.nik},{name:"user",field:"user",label:"Kecamatan",align:"left",sortable:!0,format:o=>{var i,a;return(a=(i=o==null?void 0:o.wilayah)==null?void 0:i.detail)==null?void 0:a.name}},{name:"count",label:"Peserta",align:"center"},{name:"qrcode",label:"QRCode",align:"center"},{name:"button",label:"ACTION",align:"center"}],V=_(null),j=_(null),S=_(null),U=_(k.organisasis),H=(o,i,a)=>{i(()=>{const s=o.toLowerCase();U.value=k.organisasis.filter(f=>f.nama_organisasi.toLowerCase().indexOf(s)>-1)})},F=()=>{x.Inertia.get("/data/korlap",{search:V.value,year:j.value,organisasi_id:S.value},{preserveState:!0,preserveScroll:!0,replace:!0,onFinish:()=>{r.value=!1},onBefore:()=>{r.value=!0}})},v=_([{nik:"",user_id:""}]),J=()=>{v.value.push({nik:"",nama:""})},E=(o,i)=>{const a=v.value.indexOf(o);a>-1&&v.value.splice(a,1)},W=()=>{x.Inertia.post("/data/korlap",{items:v.value},{onFinish:()=>{r.value=!1}})};return(o,i)=>(h(),Z(de,{padding:""},{default:l(()=>[e(w,{class:"my-card"},{default:l(()=>[e(u,null,{default:l(()=>[e(u,{class:"row"},{default:l(()=>[ue,e(q)]),_:1}),t("div",ce,[t("div",me,[e(N,{modelValue:S.value,"onUpdate:modelValue":[i[0]||(i[0]=a=>S.value=a),F],id:"organisasi_id",options:U.value,"track-by":"id","emit-value":"",onFilter:H,"map-options":"","option-label":"nama_organisasi","option-value":"id",loading:r.value,label:"Organisasi",debounce:"600",filled:"",dense:"",clearable:"","use-input":""},{"no-option":l(()=>[e(O,null,{default:l(()=>[e(D,{class:"text-grey"},{default:l(()=>[fe]),_:1})]),_:1})]),_:1},8,["modelValue","options","loading"])]),t("div",_e,[e(ee,{filled:"",modelValue:V.value,"onUpdate:modelValue":[i[1]||(i[1]=a=>V.value=a),F],debounce:"600",placeholder:"Search",loading:r.value,dense:""},{append:l(()=>[e(le,{name:"search"})]),_:1},8,["modelValue","loading"])])]),e(w,{class:"form q-mb-md"},{default:l(()=>[e(u,null,{default:l(()=>[e(se,{rows:n.korlaps,columns:M,"row-key":"id",loading:r.value,flat:"",onRowDblclick:P},{"body-cell-qrcode":l(a=>[e($,{props:a},{default:l(()=>[t("div",ge,[t("template",null,[t("div",pe,[e(I,{modelValue:a.expand,"onUpdate:modelValue":s=>a.expand=s},{default:l(()=>[e(w,null,{default:l(()=>[e(u,null,{default:l(()=>[t("div",be," QR Code "+p(a.row.name),1)]),_:2},1024),e(b),e(u,null,{default:l(()=>[t("div",ve,[e(te,null,{default:l(()=>[e(O,null,{default:l(()=>[e(D,null,{default:l(()=>[e(g,{style:{"text-align":"center","font-weight":"bold","font-size":"24px","text-transform":"uppercase"}},{default:l(()=>[he]),_:1}),e(g,{style:{"text-align":"center","font-weight":"bold","font-size":"16"}},{default:l(()=>[we]),_:1}),e(g,{style:{"text-align":"center","font-weight":"bold","font-size":"14px"}},{default:l(()=>[xe]),_:1}),e(g,{style:{"text-align":"center","font-weight":"bold","font-size":"12px"}},{default:l(()=>[ke]),_:1}),e(g,{style:{"text-align":"center"}},{default:l(()=>[e(oe,{width:"300px",height:"300px",src:`/qr-code/generate?data=${a.row.no}`,"spinner-color":"primary","spinner-size":"82px"},null,8,["src"])]),_:2},1024),e(g,{style:{"text-align":"center","font-weight":"bold","font-size":"24px"}},{default:l(()=>[m(p(a.row.user.name),1)]),_:2},1024),e(g,{style:{"text-align":"center","font-size":"19px"}},{default:l(()=>[m(p(a.row.organisasi.nama_organisasi),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1024),e(b),e(L,{align:"right"},{default:l(()=>[B(e(c,{flat:"",label:"Close",color:"primary"},null,512),[[z]])]),_:1})]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),e(c,{dense:"",size:"sm",color:"info",icon:"qr_code_scanner",onClick:s=>a.expand=!0},null,8,["onClick"])])]),_:2},1032,["props"])]),"body-cell-button":l(a=>[e($,{props:a},{default:l(()=>[t("div",ye,[t("template",null,[t("div",Qe,[e(I,null,{default:l(()=>[e(w,null,{default:l(()=>[e(u,null,{default:l(()=>[Ce]),_:1}),e(b),e(ne,{onSubmit:W},{default:l(()=>[e(u,null,{default:l(()=>[(h(!0),Q(A,null,R(v.value,(s,f)=>(h(),Q(A,{key:f},[e(T,null,{default:l(()=>[m("Relawan : "+p(f+1),1)]),_:2},1024),t("div",Ve,[t("div",Se,[e(N,{options:o.users,modelValue:s.nik,"onUpdate:modelValue":[d=>s.nik=d,d=>o.onSelectAnggota(d,s)],dense:"","use-input":"",outlined:"","option-value":"id","option-label":"name",label:"NIK"},null,8,["options","modelValue","onUpdate:modelValue"])]),t("div",qe,[e(N,{options:o.users,modelValue:s.user_id,"onUpdate:modelValue":[d=>s.user_id=d,d=>o.onSelectAnggota(d,s)],"use-input":"",dense:"",outlined:"","option-value":"id","option-label":"name",label:"Nama "},null,8,["options","modelValue","onUpdate:modelValue"])]),t("div",Ie,[e(c,{color:"red",icon:"delete",dense:"",onClick:d=>E(s)},null,8,["onClick"])])])],64))),128))]),_:1})]),_:1}),e(u,null,{default:l(()=>[t("div",Be,[e(q),t("div",Ae,[e(c,{onClick:J,style:{"max-width":"300px"},color:"indigo-12",icon:"add",type:"submit",loading:r.value},null,8,["onClick","loading"])])])]),_:1}),e(b),e(b),e(L,{align:"right"},{default:l(()=>[B(e(c,{flat:"",label:"Close",color:"primary"},null,512),[[z]])]),_:1})]),_:1})]),_:1})])]),e(c,{dense:"",size:"sm",color:"info",icon:"edit",onClick:s=>y(`/data/korlap/${a.row.id}/edit`)},null,8,["onClick"]),e(c,{dense:"",size:"sm",color:"info",icon:"visibility",onClick:s=>a.row.show_details=!a.row.show_details},null,8,["onClick"]),e(c,{dense:"",size:"sm",color:"red",icon:"delete",onClick:s=>C(a)},null,8,["onClick"])]),e(I,{modelValue:a.row.show_details,"onUpdate:modelValue":s=>a.row.show_details=s},{default:l(()=>[e(w,{style:{width:"400px","max-width":"80vw"}},{default:l(()=>[e(u,{class:"row items-center q-py-sm"},{default:l(()=>[Ne,e(q),B(e(c,{icon:"close",flat:"",round:"",dense:""},null,512),[[z]])]),_:1}),e(b),e(ie,{flat:"",dense:""},{default:l(()=>[$e,t("tbody",null,[(h(!0),Q(A,null,R(a.row.details,s=>{var f,d;return h(),Q("tr",null,[t("td",ze,p((f=s.user)==null?void 0:f.nik),1),t("td",Ue,p((d=s.user)==null?void 0:d.name),1)])}),256))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-count":l(a=>[e($,{props:a},{default:l(()=>[e(T,{color:"blue",label:a.row.details.length},null,8,["label"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{Ge as default};
